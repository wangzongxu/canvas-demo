!function(n){function o(e){if(t[e])return t[e].exports;var i=t[e]={i:e,l:!1,exports:{}};return n[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}var t={};o.m=n,o.c=t,o.i=function(n){return n},o.d=function(n,t,e){o.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:e})},o.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return o.d(t,"a",t),t},o.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},o.p="",o(o.s=3)}([function(n,o){},function(n,o){function t(n,o){r(n),o||u(n,C),a(n,U),s(n,_),f(n,j)}function e(n){animationFrame(function(){r(n),a(n,U),w(n,_),d(n,j),0===U.length&&c(),window.canGo&&e(n)})}function i(){_.w=G/5,_.h=P/2,_.x=G/2-G/5/2,_.y=T-P/2,j.x=_.x+_.w/2,j.y=_.y-P/4}function c(){window.canGo=!1,C=window.brickModel[++A],C||(A=0,C=window.brickModel[A]),i(),t(I)}function r(n){n.clearRect(0,0,n.canvas.width,n.canvas.height)}function a(n,o){for(var t=0;t<o.length;t++){var e=o[t];y(n,e.x+F,e.y+q,e.w,e.h,e.color)}}function u(n,o){if(!(U.length>0)){for(var t=0,e=0,i=0;i<o.length;i++){for(var c=o[i],r=0;r<c.length;r++){var a=c[r];a&&U.push({x:e+F,y:t+q,w:O,h:P,color:B[a]}),e+=O+2}e=0,t+=P+2}t=0}}function s(n,o){y(n,o.x,o.y,o.w,o.h,o.colors)}function f(n,o){m(n,o.x,o.y,o.r,o.colors)}function w(n,o){s(n,o)}function d(n,o){o.x+=o.xs,o.y-=o.ys,g(o,_,function(){if(o.reset)return o.reset=!1,window.canGo=!1,i(),void t(n,"noChangeBricks")}),x(o);for(var e=0;e<U.length;e++){var c=U[e],r=!1;if(g(o,c,function(){r=!0,S+=1,U.splice(e,1),h(c.color)}),r)break}f(n,o)}function l(n){if(n!==B[1]){for(var o in B)if(n===B[o])break;console.log(o),E.innerHTML=H[o],E.style.color=B[o],E.classList.toggle("reverse")}}function h(n){switch(l(n),n){case B[2]:!function(n){n.xs*=2,n.ys*=2,setTimeout(function(){n.xs/=2,n.ys/=2},7e3)}(j);break;case B[3]:!function(n){n.xs/=2,n.ys/=2,setTimeout(function(){n.xs*=2,n.ys*=2},7e3)}(j);break;case B[4]:!function(n){var o=1.5*n.w,t=o-n.w;n.w=o,n.x-=t/2,setTimeout(function(){var o=n.w/1.5,t=n.w-o;n.w=o,n.x+=t/2},7e3)}(_);break;case B[5]:!function(n){var o=n.w/1.5,t=n.w-o;n.w=o,n.x+=t/2,setTimeout(function(){var o=1.5*n.w,t=o-n.w;n.w=o,n.x-=t/2},7e3)}(_);break;case B[6]:!function(){function n(){animationFrame(function(){U.splice(o(),1),S++,--t&&n()})}function o(){var n=U.length-1;return Math.round(Math.random()*n)}if(!(U.length<2)){var t=Math.floor(U.length/2);n()}}();break;case B[7]:!function(){j.reset=!0}()}}function g(n,o,t){var e=n.r;if(n.x+e>o.x&&n.x-e<o.x+o.w&&n.y+e>o.y&&n.y-e<o.y+o.h){var i=n.y+e-o.y,c=n.x+e-o.x,r=o.x+o.w-n.x+e,a=o.y+o.h-n.y+e,u=Math.min(a,c,r,i);console.log({top:i,bottom:a,left:c,right:r}),u===i?(n.ys=-n.ys,n.y=o.y-e):u===a?(n.ys=-n.ys,n.y=o.y+o.h+e):u===c?(n.xs=-n.xs,n.x=o.x-e):u===r&&(n.xs=-n.xs,n.x=o.x+o.w+e),t&&t()}}function x(n){var o=n.r;n.y-o<0?(n.ys=-n.ys,n.y=0+o):n.y+o>T&&(n.ys=-n.ys,n.y=T-o,v()),n.x-o<0?(n.xs=-n.xs,n.x=0+o):n.x+o>G&&(n.xs=-n.xs,n.x=G-o)}function y(n,o,t,e,i,c){n.beginPath(),n.rect(o,t,e,i),n.fillStyle=c||"black",n.fill()}function m(n,o,t,e,i){n.beginPath(),n.arc(o,t,e,0,2*Math.PI,!1),n.fillStyle=i,n.fill()}function v(){window.canGo=!1,p();var n="";S<20?n="我仅仅打掉了"+S+"个砖块，加加油！":S<40?n="我仅打掉了"+S+"个砖块，加油！":S<60?n="我打掉了"+S+"个砖块，快可以做点什么了":S<80?n="我打掉了"+S+"个砖块，可以为汪星人盖一个家":S<100?n="我打掉了"+S+"个砖块，可以盖一个洗手间":S<120?n="我打掉了"+S+"个砖块，可以盖一个单人间":S<140?n="我打掉了"+S+"个砖块，可以盖一个双人间":S<160?n="我打掉了"+S+"个砖块，可以盖一个三人间":S>=180&&(n="我打掉了"+S+"个砖块，可以盖一个温暖的家"),document.title=n,L.innerHTML=n,L.classList.remove("hide"),M.classList.remove("hide")}function b(n){D.addEventListener("touchend",N.touch),["goUp","stop","goLeft","goRight"].forEach(function(n){document.body.addEventListener("keydown",N[n])}),M.addEventListener("click",function(){window.location.href=window.location.href+"?_="+Date.now()}),R.addEventListener("click",function(){this.classList.add("hide")})}function p(){D.removeEventListener("touchend",N.touch),["goUp","stop","goLeft","goRight"].forEach(function(n){document.body.removeEventListener("keydown",N[n])})}var k=document.body.getBoundingClientRect(),L=document.querySelector(".msg"),M=document.querySelector(".again"),R=document.querySelector(".follow"),E=document.querySelector(".alert"),T=k.height,G=k.width,q=1,F=1,S=0,A=0,C=window.brickModel[A],O=(G-2*C[0].length)/C[0].length,P=(T-2*C.length)/2/C.length,U=[],B={1:"rgb(153,209,210)",2:"rgba(255, 53, 85, 0.88)",3:"rgba(28, 179, 26, 0.41)",4:"rgba(0, 153, 235, 0.55)",5:"rgba(170, 172, 184, 0.72)",6:"rgba(156, 39, 176, 0.72)",7:"rgba(255, 235, 59, 0.5)"},H={2:"SPEED!",3:"LAZY!",4:"LONG!",5:"SHORT",6:"BOOM!",7:"RETURN"},_={w:G/5,h:P/2,x:G/2-G/5/2,y:T-P/2,colors:"rgb(243,179,108)"},j={r:P/4,x:_.x+_.w/2,y:_.y-P/4,colors:"rgb(229,71,70)",xs:2,ys:2,reset:!1},D=document.getElementById("canvas"),I=D.getContext("2d");D.height=T,D.width=G,function(){window.animationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}(),/Mobile/i.test(navigator.userAgent)||R.classList.add("hide")}();var N={goUp:function(n){if(38===n.keyCode||"touch"===n){if(window.canGo)return;window.canGo=!0,e(I)}},goLeft:function(n){if(37===n.keyCode||"touch"===n){if(_.x<=0)return;_.x-=.4*_.w,window.canGo||(j.x-=.4*_.w,t(I))}},goRight:function(n){if(39===n.keyCode||"touch"===n){if(_.x+_.w>=G)return;_.x+=.4*_.w,window.canGo||(j.x+=.4*_.w,t(I))}},stop:function(n){40===n.keyCode&&(window.canGo=!1)},touch:function(n){var o=n.changedTouches[0].pageX;n.changedTouches[0].pageY>T/2?o>G/2?N.goRight("touch"):N.goLeft("touch"):(window.canGo||(o>G/2?j.xs<0&&(j.xs*=-1):j.xs>0&&(j.xs*=-1)),N.goUp("touch"))}};setTimeout(function(){t(I),b(I)},100)},function(n,o){window.brickModel=[[[0,0,0,0,1,2,1,0,0,0,0],[0,0,0,1,1,1,1,1,0,0,0],[0,0,1,1,1,6,1,1,1,0,0],[0,0,0,1,1,1,1,1,0,0,0],[0,0,0,0,1,2,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0]],[[2,0,1,0,7,2,7,0,1,0,2],[0,1,0,1,0,1,0,1,0,1,0],[0,0,1,0,1,6,1,0,1,0,0],[0,0,0,1,1,0,1,1,0,0,0],[0,0,0,0,1,2,1,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,0]],[[0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,1,7,1,0,0,0,0],[0,0,0,1,2,0,2,1,0,0,0],[0,0,1,3,1,6,1,3,1,0,0],[0,2,0,1,0,1,0,1,0,2,0],[1,0,1,0,1,0,1,0,1,0,1]],[[0,0,0,1,1,1,1,1,0,0,0],[0,0,0,1,1,7,1,1,0,0,0],[1,1,1,3,2,3,2,3,1,1,1],[1,1,1,2,1,4,1,2,1,1,1],[1,1,1,3,2,6,2,3,1,1,1],[0,0,0,1,1,1,1,1,0,0,0]],[[0,0,0,1,1,1,1,1,0,0,0],[0,0,0,1,1,6,1,1,0,0,0],[4,1,1,3,2,7,2,3,1,1,4],[5,1,1,1,1,1,1,1,1,1,5],[4,1,1,3,2,3,2,3,1,1,4],[0,0,0,1,1,1,1,1,0,0,0]],[[0,0,0,1,1,6,1,1,0,0,0],[0,0,0,1,1,7,1,1,0,0,0],[4,1,1,0,0,0,0,0,1,1,4],[5,1,1,1,1,2,1,1,1,1,5],[4,1,1,0,0,0,0,0,1,1,4],[0,0,0,1,1,0,1,1,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[1,6,1,1,1,0,1,1,1,6,1],[0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,0,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,7,0,7,1,1,1,1]],[[0,2,0,3,0,4,0,3,0,2,0],[0,1,0,1,0,7,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,5,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0]]]},function(n,o,t){t(0),t(2),t(1)}]);